<script>
    import { getContext, onDestroy } from "svelte";
    import { TJSInput } from "#standard/component";

    import {
        addSearchFilter,
        removeSearchFilter,
    } from "../../handlers/handleSearchFilter";

    export let reducerType;

    const document = getContext("actor") ?? getContext("item");
    const reducer = document[reducerType];

    const input = addSearchFilter(reducer);
    onDestroy(() => removeSearchFilter(reducer));
</script>

<div class="search-container">
    <TJSInput
        {input}
        --tjs-input-placeholder-color="#555"
        --tjs-input-background="rgba(246, 242, 235, 0.15)"
        --tjs-input-text-margin="0"
        --tjs-input-text-width="100%"
        --tjs-input-text-border="1px solid rgba(120, 100, 82, 0.2)"
    />
</div>

<style lang="scss">
    .search-container {
        flex-grow: 1;
        font-size: $font-size-sm;
        color: black;
    }
</style>
